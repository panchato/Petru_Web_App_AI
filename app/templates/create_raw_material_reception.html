{% extends 'base.html' %}
{% block content %}
<div class="container">

    <h2>Recepci&oacute;n de Materia Prima - Primer Paso</h2>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">{{ form.client_id.label }} {{ form.client_id(class="form-select", required=True) }}
        </div>
        <div class="form-group">{{ form.grower_id.label }} {{ form.grower_id(class="form-select", required=True) }}
        </div>
        <div class="form-group">{{ form.waybill.label }} {{ form.waybill(class="form-control", type="number", min="1",
            required=True) }}</div>
        <div class="form-group">{{ form.date.label }} {{ form.date(class="form-control", type="date", required=True) }}
        </div>
        <div class="form-group">{{ form.time.label }} {{ form.time(class="form-control", type="time", required=True) }}
        </div>
        <div class="form-group">{{ form.truck_plate.label }} {{ form.truck_plate(class="form-control", required=True,
            placeholder="ABCD12 &oacute; AB1234", maxlength="6") }}</div>
        <div class="form-group">{{ form.trucker_name.label }} {{ form.trucker_name(class="form-control") }}</div>
        <div class="form-group">{{ form.observations.label }} {{ form.observations(class="form-control", rows="3") }}
        </div>
        <div class="form-actions">{{ form.submit(class="btn btn-primary") }} <a href="{{ url_for('list_rmrs') }}"
                class="btn btn-secondary">Cancelar</a></div>
    </form>

    {% if reception_id %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var createLotUrl = "{{ url_for('create_lot', reception_id=reception_id) if reception_id else '#' }}";
            if (createLotUrl !== '#' && confirm('Recepci\u00f3n creada. \u00bfDesea crear un lote ahora?')) {
                window.location.href = createLotUrl;
            }
        });
    </script>
    {% endif %}

</div>
{% endblock %}